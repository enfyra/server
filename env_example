############################################
# Database - required
############################################
# One of: mysql | postgres | mongodb
DB_TYPE=mysql

# Database connection URI (master/write connection)
# For MySQL: mysql://user:password@host:port/database
# For PostgreSQL: postgresql://user:password@host:port/database
# For MongoDB: mongodb://user:password@host:port/database?authSource=admin
# 
# Note: If password contains special characters (@, :, /, etc.), URL-encode them:
#   Example: password "p@ssw0rd" → "p%40ssw0rd"
#   Common encodings: @ = %40, : = %3A, / = %2F, % = %25, # = %23, ? = %3F, & = %26
DB_URI=mysql://root:1234@localhost:3306/enfyra

# Replica URIs (optional, comma-separated for multiple replicas)
# DB_REPLICA_URIS=mysql://user:password@replica1:3306/enfyra,mysql://user:password@replica2:3306/enfyra

# Read from master (optional, default: false)
# If true, master is included in round-robin pool for reads (master + replicas)
# If false, read queries only use replicas via round-robin (master is only used for writes)
# DB_READ_FROM_MASTER=false

# MongoDB URI (only if DB_TYPE=mongodb)
# MONGO_URI=mongodb://enfyra_admin:enfyra_password_123@localhost:27017/enfyra?authSource=admin

############################################
# SQL Connection Pool - optional (tune per env)
############################################
# Total connection pool size (automatically distributed between master and replicas)
DB_POOL_MIN_SIZE=2                   # Total minimum connections (distributed across all nodes)
DB_POOL_MAX_SIZE=100                 # Total maximum connections (distributed across all nodes)

# Pool distribution ratio (optional, default: 0.6 = 60% master, 40% replicas)
# Example: DB_POOL_MAX_SIZE=100, DB_POOL_MASTER_RATIO=0.6, 1 master + 2 replicas
#   → Master: 60 connections, Each replica: 20 connections
# DB_POOL_MASTER_RATIO=0.6           # Master gets 60% of total pool, remaining 40% divided among replicas

# Connection acquisition timeout (ms)
DB_ACQUIRE_TIMEOUT=60000
# PostgreSQL idle connection timeout (ms)
DB_IDLE_TIMEOUT=30000

############################################
# Redis Cache - required
############################################
# redis://user:pass@host:port/db
REDIS_URI=redis://localhost:6379
# Default TTL (seconds) for cache entries
DEFAULT_TTL=5

############################################
# App Runtime - required
############################################
# Node instance name (for logs/cluster)
NODE_NAME=my_enfyra
# HTTP port
PORT=1105
# Script execution timeouts (ms)
DEFAULT_HANDLER_TIMEOUT=20000
DEFAULT_PREHOOK_TIMEOUT=20000
DEFAULT_AFTERHOOK_TIMEOUT=20000

############################################
# Auth - required
############################################
# JWT secret
SECRET_KEY=my_secret
# bcrypt salt rounds
SALT_ROUNDS=10
# Access/Refresh token expirations
ACCESS_TOKEN_EXP=15m
REFRESH_TOKEN_NO_REMEMBER_EXP=1d
REFRESH_TOKEN_REMEMBER_EXP=7d

############################################
# Admin Account - required
############################################
# Default admin account (created on first init)
ADMIN_EMAIL=admin@enfyra.com
ADMIN_PASSWORD=admin123456

############################################
# Package Manager - optional
############################################
# One of: yarn | npm | pnpm
PACKAGE_MANAGER=yarn

############################################
# Handler Executor (child pool) - optional
############################################
# Max old space (MB) per child process
HANDLER_EXECUTOR_MAX_MEMORY=512
# Min/Max pool size
HANDLER_EXECUTOR_POOL_MIN=2
HANDLER_EXECUTOR_POOL_MAX=4

############################################
# Swagger / Public Base URL - required
############################################
# Full backend URL exposed to clients (e.g. behind proxy)
BACKEND_URL=http://localhost:1105

############################################
# Environment - required
############################################
# development | production | test
NODE_ENV=development